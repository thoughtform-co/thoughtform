/* ═══════════════════════════════════════════════════════════════
   DESIGN TOKENS
   Thoughtform Design System Variables
   ═══════════════════════════════════════════════════════════════ */

:root {
  /* Colors */
  --void: #0a0908;
  --void-deep: #050504;
  --dawn: #ebe3d6;
  --dawn-90: rgba(235, 227, 214, 0.9);
  --dawn-80: rgba(235, 227, 214, 0.8);
  --dawn-70: rgba(235, 227, 214, 0.7);
  --dawn-60: rgba(235, 227, 214, 0.6);
  --dawn-50: rgba(235, 227, 214, 0.5);
  --dawn-40: rgba(235, 227, 214, 0.4);
  --dawn-35: rgba(235, 227, 214, 0.35);
  --dawn-30: rgba(235, 227, 214, 0.3);
  --dawn-25: rgba(235, 227, 214, 0.25);
  --dawn-20: rgba(235, 227, 214, 0.2);
  --dawn-15: rgba(235, 227, 214, 0.15);
  --dawn-10: rgba(235, 227, 214, 0.1);
  --dawn-08: rgba(235, 227, 214, 0.08);
  --dawn-04: rgba(235, 227, 214, 0.04);
  --gold: #caa554;
  --gold-70: rgba(202, 165, 84, 0.7);
  --gold-60: rgba(202, 165, 84, 0.6);
  --gold-50: rgba(202, 165, 84, 0.5);
  --gold-40: rgba(202, 165, 84, 0.4);
  --gold-30: rgba(202, 165, 84, 0.3);
  --gold-20: rgba(202, 165, 84, 0.2);
  --gold-15: rgba(202, 165, 84, 0.15);
  --gold-10: rgba(202, 165, 84, 0.1);
  --gold-08: rgba(202, 165, 84, 0.08);
  --alert: #ff6b35;

  /* Typography - Uses CSS variables from next/font in app/layout.tsx */
  --font-display: var(--font-mondwest), "PP Mondwest", serif;
  --font-body: var(--font-ibm-plex-mono), "IBM Plex Mono", monospace;
  --font-data: var(--font-ibm-plex-mono), "IBM Plex Mono", monospace;
  --font-mono: var(--font-ibm-plex-mono), "IBM Plex Mono", monospace;

  /* ─── FLUID TYPOGRAPHY SCALE ───
     Tuned for smooth scaling across 430px–1440px viewports.
     Uses clamp(min, preferred, max) for evergreen responsiveness.
  */
  --type-xs: clamp(9px, 0.5rem + 0.1vw, 10px);
  --type-sm: clamp(10px, 0.6rem + 0.15vw, 12px);
  --type-base: clamp(13px, 0.75rem + 0.2vw, 15px);
  --type-md: clamp(14px, 0.8rem + 0.25vw, 16px);
  --type-lg: clamp(16px, 0.9rem + 0.4vw, 20px);
  --type-xl: clamp(18px, 1rem + 0.6vw, 26px);
  --type-2xl: clamp(22px, 1.2rem + 1vw, 32px);
  --type-display: clamp(28px, 1.5rem + 2vw, 48px);

  /* Spacing (8px grid) */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 24px;
  --space-xl: 32px;
  --space-2xl: 48px;
  --space-3xl: 64px;
  --space-4xl: 96px;

  /* ─── SAFE AREA INSETS (iOS notch/home indicator) ───
     Requires viewport-fit=cover in <meta name="viewport">
  */
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left: env(safe-area-inset-left, 0px);

  /* Layout */
  --hud-padding: clamp(32px, 4vw, 64px);
  --rail-width: 60px;
  --content-max-width: 1200px;
  --corner-size: 40px;

  /* ─── CORNER BRACKET TOKENS ───
     Unified system for corner brackets across all frames.
     Arm length = how far the bracket extends along each edge.
     Thickness = stroke weight of the bracket lines.
     
     Optical correction: Larger frames need thicker lines to maintain
     visual weight. The ratio (thickness/arm) stays roughly consistent.
  */
  --corner-arm-xs: 10px; /* Delicate: small labels, subtle frames */
  --corner-arm-sm: 16px; /* Cards: content cards, panels */
  --corner-arm-md: 20px; /* Standard: bridge frame, terminals */
  --corner-arm-lg: 24px; /* Emphasis: editor panels, modals */
  --corner-arm-xl: 40px; /* HUD: viewport corner brackets */

  /* Thickness tokens - optically weighted for visual consistency */
  --corner-thickness-hairline: 1px; /* For xs arms (ratio ~0.10) */
  --corner-thickness-thin: 1.5px; /* For sm/md arms (ratio ~0.08) */
  --corner-thickness-default: 2px; /* Standard weight (ratio ~0.08-0.10) */
  --corner-thickness-bold: 3px; /* For lg/xl arms (ratio ~0.08) */

  /* Shorthand presets combining arm + thickness for common use cases */
  --corner-preset-subtle: 10px 1px; /* xs arm, hairline */
  --corner-preset-card: 16px 2px; /* sm arm, default */
  --corner-preset-frame: 20px 2px; /* md arm, default */
  --corner-preset-panel: 24px 1.5px; /* lg arm, thin */
  --corner-preset-hud: 40px 2px; /* xl arm, default */

  /* ─── SAFE-AREA DERIVED HUD PADDINGS ───
     Ensure HUD elements respect device safe areas (notch, home indicator).
  */
  --hud-pad-top: max(var(--hud-padding), var(--safe-top));
  --hud-pad-right: max(var(--hud-padding), var(--safe-right));
  --hud-pad-bottom: max(var(--hud-padding), var(--safe-bottom));
  --hud-pad-left: max(var(--hud-padding), var(--safe-left));

  /* ─── FRAME SIZING TOKENS ───
     Consistent frame dimensions for cards, terminals, bridge frames.
  */
  --frame-max-w: min(90vw, 560px);
  --frame-pad-x: clamp(16px, 4vw, 32px);
  --frame-pad-y: clamp(16px, 3vw, 24px);
  --frame-corner: 16px;

  /* 8-Column Grid System */
  --grid-columns: 8;
  --grid-gap: 24px;
  --content-inset: 40px;
  --content-start: calc(var(--hud-padding) + var(--rail-width) + var(--content-inset));
  --content-end: calc(var(--hud-padding) + var(--rail-width) + var(--content-inset));

  /* Animation */
  --duration-fast: 0.15s;
  --duration-normal: 0.3s;
  --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
}

/* ═══════════════════════════════════════════════════════════════
   RESPONSIVE VARIABLE OVERRIDES
   Breakpoints: 900px (compact), 768px (tablet/mobile), 480px (phone)
   ═══════════════════════════════════════════════════════════════ */

@media (max-width: 900px) {
  :root {
    --rail-width: 0px;
    --corner-size: 30px;
    --frame-max-w: min(92vw, 520px);
  }
}

@media (max-width: 768px) {
  :root {
    --hud-padding: 8px;
    --rail-width: 32px;
    --corner-size: 20px;
    --space-2xl: 32px;
    --space-3xl: 48px;
    --space-4xl: 64px;

    /* Frame tokens - tighter on mobile */
    --frame-max-w: calc(100vw - 2 * (var(--hud-padding) + var(--rail-width) + 12px));
    --frame-pad-x: clamp(14px, 4vw, 24px);
    --frame-pad-y: clamp(14px, 3vw, 20px);
    --frame-corner: 12px;

    /* Typography: slightly larger base for mobile readability */
    --type-base: clamp(14px, 0.8rem + 0.2vw, 16px);
    --type-md: clamp(15px, 0.85rem + 0.25vw, 17px);
  }
}

/* ─── PHONE-FOCUSED REFINEMENTS (≤480px) ───
   Primary target: iPhone Pro Max (≈430px) and similar large phones.
*/
@media (max-width: 480px) {
  :root {
    --hud-padding: 6px;
    --rail-width: 28px;
    --corner-size: 18px;

    /* Tighter spacing on phones */
    --space-lg: 20px;
    --space-xl: 28px;
    --space-2xl: 28px;
    --space-3xl: 40px;

    /* Frame tokens for phone screens (slightly narrower for better proportion) */
    --frame-max-w: calc(100vw - 2 * (var(--hud-padding) + var(--rail-width) + 16px));
    --frame-pad-x: clamp(12px, 3.5vw, 20px);
    --frame-pad-y: clamp(12px, 2.5vw, 18px);
    --frame-corner: 10px;

    /* Touch-friendly minimum button heights ensured elsewhere */
  }
}
