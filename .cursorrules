# Thoughtform.co - Cursor Rules

## Context7 Documentation

When working with libraries or answering questions about APIs, use Context7 to fetch up-to-date documentation instead of relying on training data.

### Auto-Invoke Context7 For:
- Next.js App Router, Server Components, Server Actions
- Supabase authentication, realtime, RLS policies
- Three.js / React Three Fiber / Drei
- Framer Motion animations
- Tailwind CSS utilities
- Any library where the user asks "how do I..." or "what's the latest way to..."

### How to Use Context7:
```bash
# Search for a library
curl -s "https://context7.com/api/v1/search?query=LIBRARY_NAME"

# Fetch docs (use resolved ID from search)
curl -s "https://context7.com/api/v1/LIBRARY_ID/llms.txt?tokens=5000"
```

### Common Library IDs:
- Next.js: `vercel/next.js`
- React: `facebook/react`
- Supabase: `supabase/supabase-js`
- Tailwind: `tailwindlabs/tailwindcss`
- Three.js: `mrdoob/three.js`
- R3F: `pmndrs/react-three-fiber`
- Drei: `pmndrs/drei`
- Framer Motion: `framer/motion`
- Zustand: `pmndrs/zustand`
- GSAP: `greensock/gsap`

## Project Context

This is the Thoughtform.co website - a Next.js 14 app with:
- Sophisticated HUD navigation system (`components/hud/NavigationCockpitV2/`)
- Particle system with Supabase-backed config
- Scroll-driven animations with progress values 0-1
- Mobile-first responsive design

## Code Style

- TypeScript strict mode
- Functional components with hooks
- CSS variables for theming (--gold, --dawn, --frame-opacity)
- Follow existing patterns in the codebase
- Use existing abstractions before creating new ones

## Development Server Port

**CRITICAL: Thoughtform.co uses port 3003 exclusively.**

- The dev server is configured to run on port 3003 in `package.json`
- **Never change this port** - it's assigned to prevent conflicts with other projects
- When running `npm run dev`, the server will start on `http://localhost:3003`
- If port 3003 is in use, the server will fail to start (this is intentional - don't auto-select another port)
- This ensures multiple Cursor projects can run simultaneously without interference

**Port Assignment:**
- Thoughtform.co: Port 3003 (this project)
- Other projects: Use different ports (e.g., 3000, 3001, 3002, 3004+)

**Configuration Location:**
- `package.json` - `dev` and `start` scripts include `-p 3003` flag
- `playwright.config.ts` - Test configuration uses port 3003
- `README.md` and `CLAUDE.md` - Documentation references port 3003

## Key Files

- `CLAUDE.md` - Full project memory
- `.claude/skills/context7/SKILL.md` - Context7 skill details
- `.claude/skills/context7/LIBRARIES.md` - Library ID reference

